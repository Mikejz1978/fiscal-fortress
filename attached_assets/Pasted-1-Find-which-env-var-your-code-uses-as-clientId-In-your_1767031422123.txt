1) Find which env var your code uses as “clientId”

In your repo (Replit shell), run:

grep -R "clientId" -n src server 2>/dev/null
grep -R "REPL" -n src server 2>/dev/null
grep -R "openid-client" -n src server 2>/dev/null


You’re looking for something like:

clientId: process.env.REPL_ID

clientId: process.env.CLIENT_ID

process.env.REPLIT_CLIENT_ID

etc.

Whatever you see there is the exact env var Render needs.

2) Quick fix option A (recommended): make auth optional on Render

Add a guard so OIDC only initializes if the needed vars exist.

Example pattern (adjust env var names to match your code):

const clientId = process.env.REPL_ID; // or whatever your code uses

const authEnabled = !!clientId && !!process.env.ISSUER_URL; // add any others you require

if (!authEnabled) {
  console.warn("Auth disabled: missing OIDC env vars");
  // skip setting up auth routes / middleware
} else {
  // normal OIDC setup
}


Then deploy on Render without auth until you’re ready to wire a real provider.

3) Fix option B: actually configure OIDC on Render

If you want auth working on Render, you must set the variables your OIDC setup expects.

Typical minimums are:

Client ID (the one your error is complaining about)

Issuer URL (who issues tokens)

Redirect URL (must match your Render domain callback route)

Session secret (for express-session)

So in Render → Environment, add at least:

SESSION_SECRET = long random string

plus whatever your code expects for client id / issuer / redirect

Also fix this warning (you should do it either way)

You’re getting:

express-session deprecated req.secret; provide secret option

That means your session() middleware doesn’t have a secret. Add:

app.use(session({
  secret: process.env.SESSION_SECRET!,
  resave: false,
  saveUninitialized: false,
  // cookie: { secure: true } // if you’re behind HTTPS
}));


And set SESSION_SECRET in Render.

4) One more Render gotcha (repo access message)

Render is saying:

“we don't have access to your repo, but we'll try to clone it anyway”

It’s still cloning, but to stop that warning (and prevent random failures later), make the GitHub repo public or reconnect GitHub to Render / install the Render GitHub app for that repo.

If you paste the lines from the grep results that show where clientId is set, I’ll tell you exactly which env vars to add on Render (and what to name them), or I’ll give you the clean “auth optional” patch for your exact files.
~/workspace$ grep -R "clientId" -n src server 2>/dev/null
grep -R "REPL" -n src server 2>/dev/null
grep -R "openid-client" -n src server 2>/dev/null
server/replit_integrations/auth/replitAuth.ts:15:      process.env.REPL_ID!
server/replit_integrations/auth/replitAuth.ts:125:          client_id: process.env.REPL_ID!,
server/replit_integrations/auth/replitAuth.ts:1:import * as client from "openid-client";
server/replit_integrations/auth/replitAuth.ts:2:import { Strategy, type VerifyFunction } from "openid-client/passport";
~/workspace$ 

Yep — your DB is fine now. The crash you’re hitting is not DATABASE_URL anymore.

What’s actually killing the deploy

Render is starting your server, and it blows up inside Replit Auth:

TypeError: "clientId" must be a non-empty string


Your grep shows why:

server/replit_integrations/auth/replitAuth.ts uses process.env.REPL_ID!

On Render, REPL_ID is not set, so openid-client receives undefined → hard crash.

So even with DATABASE_URL set perfectly, it will still fail until you either:

Provide REPL_ID (usually only exists on Replit), or

Disable / bypass Replit Auth on Render (recommended so you can deploy today), or

Replace auth with something host-agnostic (Google/GitHub/email-pass).

Fastest fix (recommended): disable Replit Auth when REPL_ID is missing
1) Add a guard in replitAuth.ts

Open: server/replit_integrations/auth/replitAuth.ts

Find the function that initializes the auth strategy/routes (often something like setupReplitAuth(app) / initAuth(app)), and add this at the very top:

if (!process.env.REPL_ID) {
  console.warn("REPL_ID not set — skipping Replit Auth setup (Render deploy mode).");
  return;
}


That alone stops the openid-client crash.

2) Make “auth required” middleware not block you on Render

Some routes probably assume req.user exists. Add a bypass env flag so it runs without auth while you’re deploying.

Create a small helper (wherever your auth middleware is), something like:

export function authOptional(req: any, res: any, next: any) {
  if (process.env.AUTH_DISABLED === "true") return next();
  return next(); // keep your existing behavior if you already have it
}


Or if you have a strict middleware like requireAuth, change it to:

export function requireAuth(req: any, res: any, next: any) {
  if (process.env.AUTH_DISABLED === "true") return next();
  if (req.isAuthenticated?.() || req.user) return next();
  return res.status(401).json({ error: "Unauthorized" });
}

3) Set env var on Render

In Render → Environment for the web service, add:

AUTH_DISABLED = true

(keep DATABASE_URL as you have it)

Then redeploy.

✅ Result: server boots, migrations run, app comes up.

If you really want Replit Auth on Render

You must set a real non-empty REPL_ID and whatever else that integration expects — but in most setups, Replit provides that automatically only inside Replit. On Render you usually won’t have a valid Replit OIDC client, so “setting a random string” may get you past the crash but then fail auth flows.

One more thing you should fix (warning in logs)

You also have:

express-session deprecated req.secret; provide secret option


Set a proper secret.

On Render env vars add:

SESSION_SECRET = (any long random string)

And in your session setup make sure you pass:

session({
  secret: process.env.SESSION_SECRET!,
  resave: false,
  saveUninitialized: false,
  // ...
})

Quick checklist for you, right now

Add the if (!process.env.REPL_ID) return; guard in replitAuth.ts

Add AUTH_DISABLED=true on Render

Add SESSION_SECRET on Render

Redeploy

If you paste the top ~60 lines of server/replit_integrations/auth/replitAuth.ts (and wherever you call it from, like server/index.ts), I’ll tell you exactly where to drop the guard + the cleanest “Render mode” bypass so you don’t have to guess.